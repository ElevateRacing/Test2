<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Elevate Racing - New Dimension of Go-Kart Racing</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="wrapper">
        <div id="logo">
            <img src="logo.png" alt="Logo" style="max-height: 50px;">
        </div>
        <div id="top-text">
            <span class="first-word">Air Kart</span> <span class="rest-words"> - Probably* the coolest kart you can fly</span>
        </div>
        <div id="left-text">
            <div><span class="regular">Mass of kart </span> <span class="bold">150kg</span></div>
            <div><span class="regular">and pilot </span> <span class="bold">100kg MAX</span></div>
            <div><span class="regular">Flight time </span> <span class="bold">15min</span></div>
            <hr class="separator">
            <div><span class="regular">8x Electric motors </span> <span class="bold">130hp</span></div>
            <div><span class="regular">8x Battery </span> <span class="bold">100V/21Ah</span></div>
            <hr class="separator">
            <div class="spacer"></div>
            <div class="spacer"></div>
            <div><span class="regular">Estimated purchase price:</span> <span class="bold">$199,000</span></div>
        </div>
        <div id="canvas-container"></div>
        <div id="right-text">
            <div><span class="bold">CFRP</span> <span class="regular"> monocoque contruction</span></div>
            <div><span class="regular">designed for </span> <span class="bold">pilots safety</span></div>
            <hr class="separator">
            <div><span class="regular">Components made from </span></div>
            <div><span class="bold">environmental friendly</span> <span class="regular"> flax fibre</span></div>
            <hr class="separator">
            <div><span class="regular">Ducted propeller for </span> <span class="bold">increased</span></div>
            <div><span class="bold">efficiency</span> <span class="regular"> and </span> <span class="bold">noise reduction</span></div>
        </div>
        <div id="bottom-text">*Disclaimer - we know its the coolest kart</div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r134/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/fflate@0.7.4/umd/index.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.134/examples/js/loaders/3MFLoader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.134/examples/js/controls/OrbitControls.js"></script>
    <script>
        // Scene, camera, and renderer setup
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, 1, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ antialias: true });
        const container = document.getElementById('canvas-container');
        const leftText = document.getElementById('left-text');
        const rightText = document.getElementById('right-text');
        const topText = document.getElementById('top-text');
        const bottomText = document.getElementById('bottom-text');
        const logo = document.getElementById('logo');
        const wrapper = document.getElementById('wrapper');

        renderer.setSize(container.clientWidth, container.clientHeight);
        renderer.setClearColor(0xffffff, 1);
        renderer.autoClear = true;
        container.appendChild(renderer.domElement);

        // Add coordinate axes
        const axesHelper = new THREE.AxesHelper(1); // Size of 1 unit
        scene.add(axesHelper);
        
        // Add lighting
        const ambientLight = new THREE.AmbientLight(0xffffff, 0.5);
        scene.add(ambientLight);

        const directionalLight1 = new THREE.DirectionalLight(0xffffff, 0.4);
        directionalLight1.position.set(5, 10, 5);
        scene.add(directionalLight1);

        const directionalLight2 = new THREE.DirectionalLight(0xffffff, 0.6);
        directionalLight2.position.set(-5, 5, -5);
        scene.add(directionalLight2);

        const directionalLight3 = new THREE.DirectionalLight(0xffffff, 0.3);
        directionalLight3.position.set(0, -5, 5);
        scene.add(directionalLight3);

        const pointLight = new THREE.PointLight(0xffffff, 0.3, 50);
        pointLight.position.set(0, 5, 5);
        scene.add(pointLight);

        // Load the Mono.3mf model
        const loader = new THREE.ThreeMFLoader();
        loader.load(
            'Mono.3mf', // Path to your .3mf file
            function (object) {
                scene.add(object);
                object.position.set(0, 0, 0); // Center the model
                object.scale.set(0.001, 0.001, 0.001);    // Adjust scale if needed
                object.rotation.z = Math.PI / 2; // Rotate 90 degrees around Z-axis
                console.log('Model loaded successfully!');
            },
            function (xhr) {
                console.log((xhr.loaded / xhr.total * 100) + '% loaded');
            },
            function (error) {
                console.error('An error occurred:', error);
            }
        );

        // Position the camera
        camera.position.z = 1;

        // Add orbit controls for manipulation
        const controls = new THREE.OrbitControls(camera, renderer.domElement);
        controls.enableDamping = false;
        controls.dampingFactor = 0.05;
        controls.minDistance = 2;
        controls.maxDistance = 20;
        controls.enableZoom = true;
        controls.zoomSpeed = 1.0;
        controls.minPolarAngle = 0;          // Allow full rotation (0 degrees)
        controls.maxPolarAngle = 2 * Math.PI; // Allow full rotation (360 degrees)

        function resizeRenderer() {
            const totalWidth = wrapper.clientWidth;
            const leftWidth = leftText ? leftText.offsetWidth : 0;
            const rightWidth = rightText ? rightText.offsetWidth : 0;
            const canvasWidth = totalWidth - leftWidth - rightWidth;

            renderer.setSize(canvasWidth, container.clientHeight);
            camera.aspect = canvasWidth / container.clientHeight;
            camera.updateProjectionMatrix();
        }

        resizeRenderer();
        window.addEventListener('resize', resizeRenderer);

        const observer = new MutationObserver(resizeRenderer);
        [logo, topText, leftText, rightText, bottomText].forEach(element => {
            if (element) observer.observe(element, { childList: true, subtree: true, characterData: true });
        });

        // Animation loop
        function animate() {
            requestAnimationFrame(animate);
            controls.update();
            renderer.clear();
            renderer.render(scene, camera);
        }
        animate();
        </script>
</body>
</html>
